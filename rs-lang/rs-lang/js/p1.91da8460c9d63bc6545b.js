(()=>{"use strict";var e={188:(e,t,n)=>{n.r(t)},323:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(188),(new(i(n(537)).default)).start()},537:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(88)),r=s(n(251));t.default=class{start(){return i(this,void 0,void 0,(function*(){yield(0,r.default)(),this.enableHashChange(),this.enableMenu(),(0,o.default)()}))}enableHashChange(){window.addEventListener("hashchange",(()=>(0,o.default)()))}enableMenu(){const e=document.querySelector("#burger"),t=document.querySelector("#nav");e.onclick=()=>{t.classList.toggle("open"),document.body.classList.toggle("overflow-hidden")},document.addEventListener("click",(e=>{e.target instanceof HTMLElement&&!e.target.closest("#burger")&&e.target!==t&&(t.classList.remove("open"),document.body.classList.remove("overflow-hidden"))}))}}},251:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(94),o=()=>{[s.LocalStorageKey.token,s.LocalStorageKey.id,s.LocalStorageKey.name,s.LocalStorageKey.refreshToken].forEach((e=>{localStorage.removeItem(e)}))};t.default=()=>i(void 0,void 0,void 0,(function*(){const e=localStorage.getItem(s.LocalStorageKey.token),t=localStorage.getItem(s.LocalStorageKey.refreshToken),n=localStorage.getItem(s.LocalStorageKey.id),r=localStorage.getItem(s.LocalStorageKey.name);if(e&&t&&n&&r){const e=yield((e,t)=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${s.BASE_LINK}/users/${t}/tokens`,{method:"GET",headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});if(n.ok){const e=yield n.json();return localStorage.setItem(s.LocalStorageKey.token,e.token),localStorage.setItem(s.LocalStorageKey.refreshToken,e.refreshToken),!0}return!1})))(t,n);if(e){const e=document.querySelector(".user-name"),t=document.querySelector(".sign-out"),n=document.querySelector(".sign-in");e.style.display="block",e.innerHTML=r,t.style.display="block",n.style.display="none",document.querySelector("#statistics-link").style.display="block",t.onclick=()=>{o(),window.location.reload()}}else o()}else o()}))},816:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e="div",t="",n="",i=null){const s=document.createElement(e);s.className=t,s.textContent=n,i&&Object.entries(i).forEach((([e,t])=>{s.setAttribute(e,t)})),this.node=s}destroy(){this.node.remove()}}},321:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.container=document.createElement("div")}render(){return this.container}}},422:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createPopUp=t.audioFalse=t.audioTrue=t.audioStart=t.getRandomPage=t.getRandom=t.shuffle=void 0;const o=n(934),r=n(496),a=s(n(816)),d=n(94);t.shuffle=function(e){let t=e;for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},t.getRandom=function(){return!!Math.round(Math.random())},t.getRandomPage=function(){return Math.round(29*Math.random())},t.audioStart=function(){var e=new Audio;e.src="sounds/art-quiz_assets_sound_raund.mp3",e.play()},t.audioTrue=function(){var e=new Audio;e.src="sounds/incorrect.mp3",e.play()},t.audioFalse=function(){var e=new Audio;e.src="sounds/correct.mp3",e.play()},t.createPopUp=function(e,t,n){const s=new a.default("div","popup__overlay"),l=s.node;document.body.append(l);const c=new a.default("div","popup"),u=c.node,h=new a.default("div","popup-text","Вы действительно хотите закончить игру?").node;u.append(h);const p=new a.default("button","popup-stop","Закончить игру").node;p.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){const i=document.querySelector("#root");if(i.innerHTML="",localStorage.getItem(d.LocalStorageKey.id)&&(yield t.sendStatistics(n)),"sprint"===e){const e=(new r.SprintPage).render();i.append(e)}else if("audiocall"===e){const e=(new o.AudioCallPage).render();i.append(e)}c.destroy(),s.destroy()})))),u.append(p);const f=new a.default("button","popup-continue","Продолжить игру").node;f.addEventListener("click",(()=>{c.destroy(),s.destroy()})),u.append(f),document.body.append(u)}},609:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(94),r=n(997),a=s(n(171)),d=localStorage.getItem(o.LocalStorageKey.id)||"",l=localStorage.getItem(o.LocalStorageKey.token)||"";t.default=class{constructor(){this.answersPerQuestion=5,this.data=[],this.rightAnswers=[],this.level=""}getWords(e,t){return i(this,void 0,void 0,(function*(){if(this.level=e,"any"===t){let e=yield fetch(`${o.BASE_LINK}/words?group=${this.level}`,{method:"GET"});this.data=yield e.json()}else{let e=yield fetch(`${o.BASE_LINK}/words?group=${this.level}&page=${t}`,{method:"GET"});this.data=yield e.json()}return this}))}getAnswers(){const e=[];for(;e.length<this.answersPerQuestion;){const t=this.data[Math.floor(Math.random()*this.data.length)];if(!this.rightAnswers.includes(t)){this.rightAnswers.push(t),e.push(t);for(let t=0;t<this.answersPerQuestion-1;t++){const n=this.data[Math.floor(Math.random()*this.data.length)];e.includes(n)?t--:e.push(n)}}}return e}getHardWords(){return i(this,void 0,void 0,(function*(){if(this.data=yield a.default.getHardWords(),this.data.length<10){let e=yield fetch(`${o.BASE_LINK}/words?group=5&page=29`,{method:"GET"});this.data=this.data.concat(yield e.json())}}))}getUserStatistics(){return i(this,void 0,void 0,(function*(){let e=yield fetch(`${o.BASE_LINK}/users/${d}/statistics`,{method:"GET",headers:{Authorization:`Bearer ${l}`,Accept:"application/json","Content-Type":"application/json"}});return e.ok?yield e.json():null}))}updateUserStatistics(e){return i(this,void 0,void 0,(function*(){let t=yield this.getUserStatistics();if(t&&t.optional.firstTimeInGame===(0,r.today)()){if(e.optional.audiocall&&t.optional.audiocall){const n={learnedWords:t.learnedWords+e.learnedWords,optional:{firstTimeInGame:e.optional.firstTimeInGame,audiocall:{rightAnswers:t.optional.audiocall.rightAnswers+e.optional.audiocall.rightAnswers,wrongAnswers:t.optional.audiocall.wrongAnswers+e.optional.audiocall.wrongAnswers,rightSeries:t.optional.audiocall.rightSeries>e.optional.audiocall.rightSeries?t.optional.audiocall.rightSeries:e.optional.audiocall.rightSeries},sprint:{rightAnswers:t.optional.sprint.rightAnswers,wrongAnswers:t.optional.sprint.wrongAnswers,rightSeries:t.optional.sprint.rightSeries}}},i=yield fetch(`${o.BASE_LINK}/users/${d}/statistics`,{method:"PUT",headers:{Authorization:`Bearer ${l}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)});yield i.json()}}else{const t=yield fetch(`${o.BASE_LINK}/users/${d}/statistics`,{method:"PUT",headers:{Authorization:`Bearer ${l}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});yield t.json()}}))}}},934:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AudioCallPage=void 0;const o=s(n(816)),r=s(n(321)),a=s(n(663)),d=s(n(661));class l extends r.default{constructor(e="any",t="any"){super(),this.currentLevel=e,this.currentPage=t}render(){document.body.className="body body_level3";const e=new o.default("div","audiocall-wrapper","").node,t=new o.default("div","audiocall","").node;e.append(t);const n=new o.default("div","audiocall-container",""),s=n.node,r=new o.default("p","game-header","Аудиовызов").node;s.append(r);const l=new o.default("p","audiocall-text","Тренировка улучшает восприятие речи на слух.").node;s.append(l);const c=new o.default("button","audiocall-start","Начать").node;return c.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){if(n.destroy(),"any"===this.currentLevel){const e=(new d.default).node;t.append(e)}else{let e=new a.default;yield e.startQuiz(this.currentLevel,this.currentPage)}})))),s.append(c),t.append(s),e}}t.AudioCallPage=l,t.default=new l},828:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(997),r=s(n(609));t.default=class{constructor(e){this.questionsPerLevel=10,this.model=new r.default,this.answers=[],this.view=e}createQuiz(e,t){return i(this,void 0,void 0,(function*(){"6"===e?yield this.model.getHardWords():yield this.model.getWords(e,t),yield this.renderAnswers()}))}createNextQuestion(){return i(this,void 0,void 0,(function*(){this.model.rightAnswers.length<this.questionsPerLevel?yield this.renderAnswers():this.view.showResult()}))}sendStatistics(e){return i(this,void 0,void 0,(function*(){yield this.model.updateUserStatistics(e)}))}renderAnswers(){return i(this,void 0,void 0,(function*(){const e=this.model.getAnswers(),t=this.model.rightAnswers[this.model.rightAnswers.length-1];yield this.view.displayAnswers(e,t)}))}onWordWin(e){(0,o.updateWordWins)(e,"audiocall")}onWordFail(e){(0,o.updateWordFails)(e,"audiocall")}}},663:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(816)),r=n(422),a=n(94),d=n(997),l=s(n(828)),c=["1","2","3","4","5"];t.default=class{constructor(){this.presenter=new l.default(this),this.rightAnswers=[],this.wrongAnswers=[],this.rightAnswerSeries=0,this.longestSeries=0,this.answers=[],this.level="",this.page="",this.gameContainer=document.querySelector(".audiocall"),this.addKeyEvents=()=>{window.addEventListener("keydown",(e=>i(this,void 0,void 0,(function*(){const t=document.querySelectorAll(".answer-container"),n=document.querySelector(".right-answer"),i=null==n?void 0:n.innerHTML.split(".")[0],s=document.querySelector(".result-button.next");if(void 0!==this.question){if(e.key!==i||s){if(e.key!==i&&c.includes(e.key)&&!s){this.rightAnswerSeries=0;const n=Number(e.key)-1;this.wrongAnswers.push(this.answers[n]),t[n].style.textDecoration="line-through",this.onSelectAnswer("wrong"),this.showAnswer(this.question),this.presenter.onWordFail(this.question.id||this.question._id)}}else this.rightAnswerSeries++,this.rightAnswers.push(this.question),this.onSelectAnswer("right"),this.showAnswer(this.question),this.presenter.onWordWin(this.question.id||this.question._id);if("Enter"===e.key)if(s){for(;this.gameContainer.firstChild;)this.gameContainer.removeChild(this.gameContainer.firstChild);yield this.presenter.createNextQuestion()}else this.rightAnswerSeries>this.longestSeries&&(this.longestSeries=this.rightAnswerSeries),this.rightAnswerSeries=0,this.onSelectAnswer("wrong"),this.showAnswer(this.question),this.presenter.onWordFail(this.question.id||this.question._id)}}))))},this.prepareStatistics=()=>(this.rightAnswerSeries>this.longestSeries&&(this.longestSeries=this.rightAnswerSeries),{learnedWords:this.rightAnswers.length,optional:{firstTimeInGame:(0,d.today)(),audiocall:{rightAnswers:this.rightAnswers.length,wrongAnswers:this.wrongAnswers.length,rightSeries:this.longestSeries},sprint:{rightAnswers:0,wrongAnswers:0,rightSeries:0}}})}startQuiz(e,t){return i(this,void 0,void 0,(function*(){this.level=e,this.page=t,this.addKeyEvents(),yield this.presenter.createQuiz(e,t)}))}displayQuestion(e){return i(this,void 0,void 0,(function*(){const t=document.querySelector(".audiocall-wrapper"),n=new o.default("button","close-audiocall","×").node;n.addEventListener("click",(()=>{(0,r.createPopUp)("audiocall",this.presenter,this.prepareStatistics())})),t.append(n);const s=document.querySelector(".question-container"),a=new o.default("div","question-text-container").node,d=new o.default("button","question-button").node,l=new o.default("img","question-image","",{src:"images/sound.svg",width:"54",height:"54"}).node;d.append(l);const c=new Audio(`https://rss-words-3.herokuapp.com/${e.audio}`);yield c.play(),d.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){yield c.play()})))),s.append(a),a.append(d)}))}displayAnswers(e,t){return i(this,void 0,void 0,(function*(){this.question=t,this.answers=e;let n=void 0!==t.id?t.id:t._id;const i=new o.default("div","question-container").node,s=new o.default("div","answers-container").node;(0,r.shuffle)(e).forEach(((e,i)=>{const r=new o.default("button","answer-container",`${i+1}. ${e.wordTranslate}`).node;let a=void 0!==e.id?e.id:e._id;a===n&&r.classList.add("right-answer"),s.append(r),r.addEventListener("click",(()=>{a===n?(this.rightAnswerSeries++,this.rightAnswers.push(e),this.onSelectAnswer("right"),this.showAnswer(t),this.presenter.onWordWin(t.id||t._id)):(this.rightAnswerSeries>this.longestSeries&&(this.longestSeries=this.rightAnswerSeries),this.rightAnswerSeries=0,this.wrongAnswers.push(e),r.style.textDecoration="line-through",this.onSelectAnswer("wrong"),this.showAnswer(t),this.presenter.onWordFail(t.id||t._id))}))}));const a=new o.default("button","result-button","Не знаю").node;a.addEventListener("click",(()=>{this.rightAnswerSeries>this.longestSeries&&(this.longestSeries=this.rightAnswerSeries),this.rightAnswerSeries=0,this.onSelectAnswer("wrong"),this.showAnswer(t),this.presenter.onWordFail(t.id||t._id)})),this.gameContainer.append(i),this.gameContainer.append(s),this.gameContainer.append(a),yield this.displayQuestion(t)}))}showAnswer(e){const t=document.querySelector(".question-container"),n=document.querySelector(".question-text-container"),i=new o.default("img","right-image","",{src:`https://rss-words-3.herokuapp.com/${e.image}`}).node;t.append(i);const s=new o.default("p","answer-text",`${e.word}`).node;n.append(s)}onSelectAnswer(e){new Audio(`sounds/${e}.mp3`).play(),document.querySelector(".result-button").remove(),document.querySelector(".right-answer").classList.add("answer-container-right");const t=new o.default("button","result-button next","→").node;this.gameContainer.append(t),t.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){for(;this.gameContainer.firstChild;)this.gameContainer.removeChild(this.gameContainer.firstChild);yield this.presenter.createNextQuestion()}))))}createWordsList(e,t,n){const s=new o.default("div",`${t}-answers-container`).node,r=new o.default("p",`${t}-answers-header`,`${n}`).node,a=new o.default("span",`${t}-answers-span`,`${e.length}`).node;r.append(a),s.append(r);const d=new o.default("ul","words-list").node;return e.forEach((e=>{const t=new o.default("li","answer-item").node,n=new o.default("button","answer-sound-button").node,s=new o.default("img","answer-sound-image","",{src:"images/sound.svg",width:"30",height:"30"}).node;n.append(s);const r=new Audio(`https://rsschool-learnwords.herokuapp.com/${e.audio}`);n.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){yield r.play()})))),t.append(n);const a=new o.default("p","answer-result-container").node,l=new o.default("span","answer-word",`${e.word} -`).node,c=new o.default("span","answer-translate",`${e.wordTranslate}`).node;a.append(l),a.append(c),t.append(a),d.append(t)})),s.append(d),s}showResult(){localStorage.getItem(a.LocalStorageKey.id)&&this.presenter.sendStatistics(this.prepareStatistics());const e=new o.default("div","all-answers").node;if(this.wrongAnswers.length>0){const t=this.createWordsList(this.wrongAnswers,"wrong","Ошибок");e.append(t)}if(this.rightAnswers.length>0){const t=this.createWordsList(this.rightAnswers,"right","Знаю");e.append(t)}this.gameContainer.append(e)}}},661:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(816)),r=s(n(663));t.default=class{constructor(){const e=new o.default("div","choice-container");let t=e.node;const n=new o.default("p","choice-header","Выберите уровень сложности").node;t.append(n);const s=new o.default("div","choice-buttons").node;t.append(s),["1","2","3","4","5","6"].forEach((t=>{const n=new o.default("button","choice-button",t).node;s.append(n),n.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){this.currentLevel=String(Number(n.innerText)-1),e.destroy();let t=new r.default;yield t.startQuiz(this.currentLevel,"any")}))))})),this.node=t}}},765:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(94);t.default=new class{createUser(e){return i(this,void 0,void 0,(function*(){return(yield fetch(`${s.BASE_LINK}/users`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})).status}))}loginUser(e){return i(this,void 0,void 0,(function*(){try{const t=yield fetch(`${s.BASE_LINK}/signin`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()}catch(e){return null}}))}saveUserToLocalStorage(e){localStorage.setItem(s.LocalStorageKey.token,e.token),localStorage.setItem(s.LocalStorageKey.refreshToken,e.refreshToken),localStorage.setItem(s.LocalStorageKey.id,e.userId),localStorage.setItem(s.LocalStorageKey.name,e.name)}}},190:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthPage=void 0;const s=i(n(816)),o=i(n(321)),r=i(n(28)),a=i(n(135));class d extends o.default{render(){const e=new s.default("div","auth").node,t=new s.default("div","auth__head").node,n=new s.default("button","auth__link active","Вход").node,i=new s.default("button","auth__link","Регистрация").node;t.append(n,i);const o=(new a.default).node,d=(new r.default).node;return e.append(t,o,d),n.onclick=()=>{o.style.display="",d.style.display="none",n.classList.add("active"),i.classList.remove("active")},i.onclick=()=>{o.style.display="none",d.style.display="",n.classList.remove("active"),i.classList.add("active")},document.body.className="body",e}}t.AuthPage=d,t.default=new d},28:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(816)),o=i(n(510));t.default=class{constructor(){this.presenter=new o.default(this),this.timer=setTimeout((()=>{})),this.btn=new s.default("button","auth__btn","Зарегистрироваться").node,this.invalidEmailMessage=new s.default("p","auth__error auth__error_register","Пользователь с данным e-mail уже существует").node,this.node=new s.default("form","auth__form","",{style:"display: none;"}).node;const e=new s.default("input","auth__input","",{type:"text",placeholder:"Имя",minlength:"1","data-err":"Введите имя"}).node,t=new s.default("input","auth__input","",{type:"email",placeholder:"E-mail",maxlength:"30","data-err":"Введите корректный email-адрес"}).node,n=new s.default("input","auth__input","",{type:"password",placeholder:"Пароль",minlength:"8",autocomplete:"true","data-err":"Пароль должен содержать не менее 8 символов"}).node,i=[e,t,n];i.forEach((e=>{const t=new s.default("div","auth__wrap").node,n=new s.default("div","invalid-data-message",`${e.dataset.err}`).node;e.addEventListener("input",(()=>{clearTimeout(this.timer),this.timer=setTimeout(this.checkValidity,800,e)})),t.append(e,n),this.node.append(t)})),this.btn.onclick=s=>{if(s.preventDefault(),i.forEach(this.checkValidity),i.every(this.checkValidity)){const i={name:e.value,email:t.value,password:n.value};this.btn.disabled=!0,this.presenter.onSubmit(i)}},this.node.append(this.btn,this.invalidEmailMessage)}checkValidity(e){return e.validity.valid&&e.value?(e.classList.remove("invalid"),!0):(e.classList.add("invalid"),!1)}showInvalidEmailMessage(){this.invalidEmailMessage.classList.add("visible")}}},510:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(765));t.default=class{constructor(e,t=o.default){this.view=e,this.model=t,this.view=e}onSubmit(e){return i(this,void 0,void 0,(function*(){417===(yield this.model.createUser(e))?(this.view.btn.disabled=!1,this.view.showInvalidEmailMessage()):window.history.go()}))}}},135:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(816)),o=i(n(446));t.default=class{constructor(){this.presenter=new o.default(this),this.loginErrorMessage=new s.default("p","auth__error","Неверное имя пользователя или пароль").node,this.emailInput=new s.default("input","auth__input","",{type:"email",placeholder:"E-mail","data-err":"Введите email"}).node,this.passwordInput=new s.default("input","auth__input","",{type:"password",placeholder:"Пароль",autocomplete:"true","data-err":"Введите пароль"}).node,this.btn=new s.default("button","auth__btn","Войти").node;const e=new s.default("form","auth__form").node,t=[this.emailInput,this.passwordInput];t.forEach((t=>{const n=new s.default("div","auth__wrap").node,i=new s.default("div","invalid-data-message",`${t.dataset.err}`).node;t.addEventListener("input",(()=>{this.checkValidity(t)})),n.append(t,i),e.append(n)})),this.btn.onclick=e=>{if(e.preventDefault(),t.forEach(this.checkValidity),t.every(this.checkValidity)){const e={email:this.emailInput.value,password:this.passwordInput.value};this.btn.disabled=!0,this.presenter.onSignIn(e)}},e.append(this.btn,this.loginErrorMessage),this.node=e}checkValidity(e){return e.value?(e.classList.remove("invalid"),!0):(e.classList.add("invalid"),!1)}showLoginErrorMessage(){this.loginErrorMessage.classList.add("visible")}enableButton(){this.btn.disabled=!1}}},446:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(765));t.default=class{constructor(e,t=o.default){this.view=e,this.model=t,this.view=e}onSignIn(e){return i(this,void 0,void 0,(function*(){const t=yield this.model.loginUser(e);t?(this.model.saveUserToLocalStorage(t),window.location.replace(`${window.location.origin}/`)):(this.view.showLoginErrorMessage(),this.view.enableButton())}))}}},265:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(816)),o=i(n(321));class r extends o.default{render(){document.body.className="body body_home";const e=new s.default("div","home-page__wrapper","").node,t=new s.default("div","home-page","").node;return e.append(t),t.innerHTML='\n    <section>\n      <p class="home-page__header">Изучай английский с RSLang</p>\n      <p class="home-page__string"><span class="home-page__string_bcg">Приложение для эффективного изучения иностранных слов. Зарегистрируйтесь, чтобы использовать все возможности</span></p>\n    </section>\n    <section class="features">\n      <div class="feature">\n        <div class="feature__img feature__img_book"></div>\n        <div class="feature__header feature__header_book"> Учебник</div>\n        <div class="feature__description">В учебнике собраны 3600 самых используемых в повседневной жизни слов. Слова разбиты на разделы по уровню сложности</div>\n      </div>\n      <div class="feature">\n        <div class="feature__img feature__img_game"></div>\n        <div class="feature__header feature__header_game">Игры</div>\n        <div class="feature__description">2 увлекательные игры на развитие запоминания слов, восприятия на слух и перевода</div>\n      </div>\n      <div class="feature">\n        <div class="feature__img feature__img_stats"></div>\n        <div class="feature__header feature__header_stats">Статистика</div>\n        <div class="feature__description">Отслеживайте свой прогресс в индивидуальной статистике, ставьте цели и вдохновляйся на достижение новых результатов каждый день!</div>\n      </div>\n    </section>\n    ',e}}t.default=new r},11:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(816)),r=s(n(740));t.default=class{constructor(){const e=new o.default("div","choice-container");let t=e.node;const n=new o.default("p","choice-header","Выберите уровень сложности").node;t.append(n);const s=new o.default("div","choice-buttons").node;t.append(s),["1","2","3","4","5","6"].forEach((t=>{const n=new o.default("button","choice-button",t).node;s.append(n),n.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){this.currentLevel=String(Number(n.innerText)-1),e.destroy();let t=new r.default;yield t.startQuiz(this.currentLevel,"any")}))))})),this.node=t}}},666:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(422),r=n(94),a=n(997),d=s(n(171)),l=localStorage.getItem(r.LocalStorageKey.id)||"",c=localStorage.getItem(r.LocalStorageKey.token)||"";t.default=class{constructor(){this.array=[],this.arrayEng=[],this.arrayRus=[],this.arrayPron=[],this.arrayTranscr=[],this.arrayId=[],this.page=""}fetchWords(e){return i(this,void 0,void 0,(function*(){const t=yield fetch(`http://127.0.0.1:3000/words?page=${this.page}&group=${e}`),n=yield t.json();this.array=n}))}makeQuestionsArray(e,t="any"){return i(this,void 0,void 0,(function*(){this.page="any"===t?String((0,o.getRandomPage)()):t,yield this.fetchWords(e),this.array.map((e=>this.arrayEng.push(e.word))),this.array.map((e=>this.arrayRus.push(e.wordTranslate))),this.array.map((e=>this.arrayPron.push(e.audio))),this.array.map((e=>this.arrayTranscr.push(e.transcription))),this.array.map((e=>this.arrayId.push(e.id)))}))}playAudio(e){new Audio(`https://rsschool-learnwords.herokuapp.com/${this.arrayPron[e-1]}`).play()}getHardWords(){return i(this,void 0,void 0,(function*(){let e=yield d.default.getHardWords();if(e.length<40){let t=yield fetch(`${r.BASE_LINK}/words?group=5&page=29`,{method:"GET"});e=e.concat(yield t.json())}e.map((e=>this.arrayEng.push(e.word))),e.map((e=>this.arrayRus.push(e.wordTranslate))),e.map((e=>this.arrayPron.push(e.audio))),e.map((e=>this.arrayTranscr.push(e.transcription))),e.map((e=>{void 0!==e.id?this.arrayId.push(e.id):this.arrayId.push(e._id)}))}))}getUserStatistics(){return i(this,void 0,void 0,(function*(){let e=yield fetch(`${r.BASE_LINK}/users/${l}/statistics`,{method:"GET",headers:{Authorization:`Bearer ${c}`,Accept:"application/json","Content-Type":"application/json"}});return e.ok?yield e.json():null}))}updateUserStatistics(e){return i(this,void 0,void 0,(function*(){let t=yield this.getUserStatistics();if(t&&t.optional.firstTimeInGame===(0,a.today)()){if(e.optional.sprint&&t.optional.sprint){const n={learnedWords:t.learnedWords+e.learnedWords,optional:{firstTimeInGame:e.optional.firstTimeInGame,audiocall:{rightAnswers:t.optional.audiocall.rightAnswers,wrongAnswers:t.optional.audiocall.wrongAnswers,rightSeries:t.optional.audiocall.rightSeries},sprint:{rightAnswers:t.optional.sprint.rightAnswers+e.optional.sprint.rightAnswers,wrongAnswers:t.optional.sprint.wrongAnswers+e.optional.sprint.wrongAnswers,rightSeries:t.optional.sprint.rightSeries>e.optional.sprint.rightSeries?t.optional.sprint.rightSeries:e.optional.sprint.rightSeries}}},i=yield fetch(`${r.BASE_LINK}/users/${l}/statistics`,{method:"PUT",headers:{Authorization:`Bearer ${c}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)});yield i.json()}}else{const t=yield fetch(`${r.BASE_LINK}/users/${l}/statistics`,{method:"PUT",headers:{Authorization:`Bearer ${c}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});yield t.json()}}))}}},496:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SprintPage=void 0;const o=s(n(816)),r=s(n(321)),a=s(n(11)),d=s(n(740));class l extends r.default{constructor(e="any",t="any"){super(),this.currentLevel=e,this.currentPage=t}render(){document.body.className="body body_level4";const e=new o.default("div","sprint-wrapper","").node,t=new o.default("div","sprint","").node;e.append(t);const n=new o.default("div","sprint-container",""),s=n.node;t.append(s);const r=new o.default("div","card","").node;s.append(r);const l=new o.default("h5","game-header","Спринт").node,c=new o.default("div","sprint-description","Тренирует навык быстрого перевода с английского языка на русский. Вам нужно выбрать соответствует ли перевод предложенному слову").node;r.append(l),r.append(c);const u=new o.default("button","audiocall-start","Начать").node;return u.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){if(n.destroy(),"any"===this.currentLevel){const e=(new a.default).node;t.append(e)}else{let e=new d.default;yield e.startQuiz(this.currentLevel,this.currentPage)}})))),r.append(u),e}}t.SprintPage=l,t.default=new l},787:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(422),r=n(997),a=s(n(666));t.default=class{constructor(e){this.level="any",this.page="any",this.model=new a.default,this.answers=[],this.timer=()=>{let e=61,t=document.querySelector(".timer"),n=setInterval((()=>(e>0?e--:(clearInterval(n),this.endGame()),t.innerHTML=e<10?`0${e}`:`${e}`,e)),1e3)},this.view=e}playSound(e){this.model.playAudio(e)}endGame(){this.view.renderResultsPage(this.model.arrayTranscr)}sendStatistics(e){return i(this,void 0,void 0,(function*(){yield this.model.updateUserStatistics(e)}))}addQuestion(){return i(this,void 0,void 0,(function*(){yield this.model.makeQuestionsArray(this.level,this.page)}))}createQuiz(e,t){return i(this,void 0,void 0,(function*(){this.level=e,this.page=t,"6"===this.level?yield this.model.getHardWords():yield this.model.makeQuestionsArray(this.level,this.page),(0,o.audioStart)(),this.view.renderSprint(this.model.arrayEng,this.model.arrayRus),this.timer()}))}onWordWin(e){(0,r.updateWordWins)(this.model.arrayId[e],"sprint")}onWordFail(e){(0,r.updateWordFails)(this.model.arrayId[e],"sprint")}}},740:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(816)),r=n(422),a=n(94),d=n(997),l=s(n(787));t.default=class{constructor(){this.presenter=new l.default(this),this.numberWordsEng=0,this.numberWordsRus=0,this.arrayEng=[],this.arrayRus=[],this.arrTrueAnswer=[],this.arrBooleanAnswer=[],this.sum=1,this.count=0,this.rightAnswerSeries=0,this.longestSeries=0,this.gameContainer=document.querySelector(".sprint"),this.leftBut=document.getElementById("btn-left"),this.rightBut=document.getElementById("btn-right"),this.soundImage=document.getElementById("sound-image"),this.renderSprint=(e,t)=>{this.arrayEng=e,this.arrayRus=t;const n=document.querySelector(".sprint-wrapper"),i=new o.default("button","close-sprint","×").node;i.addEventListener("click",(()=>{(0,r.createPopUp)("sprint",this.presenter,this.prepareStatistics())})),n.append(i),this.gameContainer.innerHTML='\n    <div class="card">\n    <div class="sprint-top">\n      <div class="block-timer">\n        <p class="timer"></p>\n      </div>\n      <div class="block-result">\n        <p class="result" id="result">0</p>\n      </div>\n    </div>\n    <div class="card-circle-block" id="card-circle-block">\n    \n    </div>\n    <div class="png-image-block" id="png-image-block">\n    </div>\n    <div class="card-body">\n      </div> \n  </div>\n    ';const s=new o.default("div","btn-group").node,a=new o.default("button","btn-answer btn-left","Неверно").node;a.addEventListener("click",(()=>{this.nextQuestionFalse()})),document.addEventListener("keydown",(e=>{"ArrowLeft"==e.code&&(this.nextQuestionFalse(),a.style.backgroundColor="#c2c2c2ee")})),document.addEventListener("keyup",(e=>{"ArrowLeft"==e.code&&(a.style.backgroundColor="transparent")})),s.append(a);const d=new o.default("button","btn-answer btn-right","Верно").node;d.addEventListener("click",(()=>{this.nextQuestionTrue()})),document.addEventListener("keydown",(e=>{"ArrowRight"==e.code&&(this.nextQuestionTrue(),d.style.backgroundColor="#c2c2c2ee")})),document.addEventListener("keyup",(e=>{"ArrowRight"==e.code&&(d.style.backgroundColor="transparent")})),s.append(d),this.gameContainer.append(s),this.renderMainWords(this.numberWordsEng,this.numberWordsRus)},this.renderMainWords=(e,t)=>{document.querySelector(".card-body").innerHTML=`<img id="sound-image"\n  src="./images/sound.svg" alt="sound" />\n     <h5 class="card-title">${this.arrayEng[e]}</h5>\n     <p class="card-text">${this.arrayRus[t]}</p>`},this.nextQuestionTrue=()=>{this.numberWordsEng===this.numberWordsRus?(this.rightAnswerSeries++,this.presenter.onWordWin(this.numberWordsEng),this.arrTrueAnswer.push(this.arrayEng[this.numberWordsEng]),this.arrBooleanAnswer.push("true"),(0,r.audioTrue)()):(this.rightAnswerSeries>this.longestSeries&&(this.longestSeries=this.rightAnswerSeries),this.rightAnswerSeries=0,this.presenter.onWordFail(this.numberWordsEng),this.arrTrueAnswer=[],this.arrBooleanAnswer.push("false"),(0,r.audioFalse)()),this.sumResult(),this.renderCircleBlock(),this.changeColorPoint(),this.renderToyBlock(),this.numberWordsEng+=1,this.numberWordsRus=this.numberWordsEng,(0,r.getRandom)()||(this.numberWordsEng>=0&&this.numberWordsEng<10?this.numberWordsRus=this.numberWordsEng+10:this.numberWordsEng>=10&&(this.numberWordsRus=this.numberWordsEng-10)),this.numberWordsEng%19==0&&this.presenter.addQuestion(),this.renderMainWords(this.numberWordsEng,this.numberWordsRus)},this.nextQuestionFalse=()=>{this.numberWordsEng!==this.numberWordsRus?(this.rightAnswerSeries++,this.presenter.onWordWin(this.numberWordsEng),this.arrTrueAnswer.push(this.arrayEng[this.numberWordsEng]),this.arrBooleanAnswer.push("true"),(0,r.audioTrue)()):(this.rightAnswerSeries>this.longestSeries&&(this.longestSeries=this.rightAnswerSeries),this.rightAnswerSeries=0,this.presenter.onWordFail(this.numberWordsEng),this.arrTrueAnswer=[],this.arrBooleanAnswer.push("false"),(0,r.audioFalse)()),this.sumResult(),this.renderCircleBlock(),this.changeColorPoint(),this.renderToyBlock(),this.numberWordsEng+=1,this.numberWordsRus=this.numberWordsEng,(0,r.getRandom)()&&(this.numberWordsEng>=0&&this.numberWordsEng<10?this.numberWordsRus=this.numberWordsEng+10:this.numberWordsEng>=10&&(this.numberWordsRus=this.numberWordsEng-10)),this.numberWordsEng%19==0&&this.presenter.addQuestion(),this.renderMainWords(this.numberWordsEng,this.numberWordsRus)},this.playAudio=()=>{document.getElementById("sound-image").addEventListener("click",(()=>{this.presenter.playSound(this.numberWordsEng+1)}))},this.sumResult=()=>{const e=document.getElementById("result");return 1===this.arrTrueAnswer.length||2===this.arrTrueAnswer.length||3===this.arrTrueAnswer.length?(this.count+=this.sum,e.innerText=`${this.count}`):this.arrTrueAnswer.length>3&&this.arrTrueAnswer.length<=6?(this.sum=10,this.count+=this.sum,e.innerText=`${this.count}`):this.arrTrueAnswer.length>6&&this.arrTrueAnswer.length<=9?(this.sum=25,this.count+=this.sum,e.innerText=`${this.count}`):this.arrTrueAnswer.length>9?(this.sum=50,this.count+=this.sum,e.innerText=`${this.count}`):void 0},this.renderCircleBlock=()=>{const e=document.getElementById("card-circle-block");let t="grey",n="grey",i="grey";this.arrTrueAnswer.length%3==1&&(t="#18F018"),this.arrTrueAnswer.length%3==2&&(t="#18F018",n="#18F018"),this.arrTrueAnswer.length%3==0&&this.arrTrueAnswer.length>1&&(t="#18F018",n="#18F018",i="#18F018");let s="+1";this.arrTrueAnswer.length<3&&(s="+1"),this.arrTrueAnswer.length>=3&&this.arrTrueAnswer.length<6&&(s="+10"),this.arrTrueAnswer.length>=6&&this.arrTrueAnswer.length<9&&(s="+25"),this.arrTrueAnswer.length>=9&&(s="+50"),e.innerHTML=`\n       <div class="block-point">\n          <h5 id="block-point-inner">${s}</h5>\n        </div>\n        <div class="block-point-svg">\n        <svg height="100" width="100">\n        <circle cx="17" cy="17" r="12" stroke="black" stroke-width="1" fill="${t}" class="circle" />\n      </svg>\n      <svg height="100" width="100">\n        <circle cx="17" cy="17" r="12" stroke="black" stroke-width="1" fill="${n}" class="circle"/>\n      </svg>\n      <svg height="100" width="100">\n        <circle cx="17" cy="17" r="12" stroke="black" stroke-width="1" fill="${i}" class="circle" />\n      </svg>      </div>\n      `},this.changeColorPoint=()=>{let e=document.getElementById("block-point-inner");this.arrTrueAnswer.length<=3&&(e.classList.add("blue"),e.classList.contains("red")&&e.classList.remove("red"),e.classList.contains("orange")&&e.classList.remove("orange"),e.classList.contains("chartreuse")&&e.classList.remove("chartreuse")),this.arrTrueAnswer.length>=3&&this.arrTrueAnswer.length<6&&e.classList.add("red"),this.arrTrueAnswer.length>=6&&this.arrTrueAnswer.length<9&&(e.classList.remove("red"),e.classList.add("orange")),this.arrTrueAnswer.length>=9&&(e.classList.remove("orange"),e.classList.add("chartreuse"))},this.renderToyBlock=()=>{const e=document.getElementById("png-image-block");let t="opacity",n="opacity",i="opacity";this.arrTrueAnswer.length>=3&&(t=""),this.arrTrueAnswer.length>=6&&(n=""),this.arrTrueAnswer.length>=9&&(i=""),e.innerHTML=`  <img\n     src="./images/makaka1.png"\n     class="card-img-top png-image"\n     alt="crab"\n   />\n   <img\n     src="./images/makaka2.png"\n     class="card-img-top1 png-image ${t}"\n     alt="duck"\n   />\n   <img\n     src="./images/makaka3.png"\n     class="card-img-top2 png-image ${n}"\n     alt="poni"\n   />\n   <img\n     src="./images/makaka4.png"\n     class="card-img-top3 png-image ${i}"\n     alt="sheep"\n   />\n    `},this.prepareStatistics=()=>{this.rightAnswerSeries>this.longestSeries&&(this.longestSeries=this.rightAnswerSeries);const e=this.arrBooleanAnswer.filter((e=>"true"===e)).length,t=this.arrBooleanAnswer.filter((e=>"false"===e)).length;return{learnedWords:e,optional:{firstTimeInGame:(0,d.today)(),sprint:{rightAnswers:e,wrongAnswers:t,rightSeries:this.longestSeries},audiocall:{rightAnswers:0,wrongAnswers:0,rightSeries:0}}}},this.renderResultsPage=e=>{localStorage.getItem(a.LocalStorageKey.id)&&this.presenter.sendStatistics(this.prepareStatistics());const t=`\n  <div class="card">\n  <h6 class="card-title">Ваш результат ${this.count}</h6>\n\n  <div class="card-bodys">\n    \n    <div class="sprint-results"></div>\n  </div>\n</div>\n  `;for(;this.gameContainer.firstChild;)this.gameContainer.removeChild(this.gameContainer.firstChild);const n=new o.default("div","sprint-results-page").node;n.innerHTML=t,this.gameContainer.append(n);let i=document.querySelector(".sprint-results");const s=new o.default("ul","sprint-results-list").node;i.append(s);for(let t=1;t<=this.numberWordsEng;t++){const n=new o.default("li","sprint-results-item").node,i=`<img src="images/sound.svg" alt="sound" class="results-img" data-number="${t-1}" id='sound-image${t-1}'>`,r=new o.default("button","sprint-results-button").node;r.innerHTML=i,r.addEventListener("click",(()=>{this.presenter.playSound(t)})),n.append(r);const a=`\n      <h5 class="engWord">${this.arrayEng[t-1]}</h5>\n      <p class="transr">${e[t-1]}</p>\n      <h5 class="rusWords">${this.arrayRus[t-1]}</h5>\n      <img src="./images/${this.arrBooleanAnswer[t-1]}.png" alt="boolean" class="boolenImage">\n    `,d=new o.default("div","result-item-text").node;d.innerHTML=a,n.append(d),s.append(n)}}}startQuiz(e,t){return i(this,void 0,void 0,(function*(){yield this.presenter.createQuiz(e,t),this.renderToyBlock(),this.renderCircleBlock()}))}}},602:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(321)),r=n(94),a=n(997),d=n(85),l=localStorage.getItem(r.LocalStorageKey.id)||"",c=localStorage.getItem(r.LocalStorageKey.token)||"";class u extends o.default{render(){return document.body.className="body",this.displayWordsStatistics(),this.container}displayWordsStatistics(){return i(this,void 0,void 0,(function*(){const e=(yield function(){return i(this,void 0,void 0,(function*(){const e=new URLSearchParams({page:"0",wordsPerPage:"3600",filter:'{"userWord.optional.playedInGame":true}'}).toString(),t=yield fetch(`${r.BASE_LINK}/users/${l}/aggregatedWords?${e}`,{method:"GET",headers:{Authorization:`Bearer ${c}`,Accept:"application/json"}});return(yield t.json())[0].paginatedResults}))}()).filter((e=>{var t;return(null===(t=e.userWord)||void 0===t?void 0:t.optional.firstTimeInGame)===(0,a.today)()})),t=e.filter((e=>{var t;return"audiocall"===(null===(t=e.userWord)||void 0===t?void 0:t.optional.firstGameName)})),n=e.filter((e=>{var t;return"sprint"===(null===(t=e.userWord)||void 0===t?void 0:t.optional.firstGameName)})),s=yield function(){return i(this,void 0,void 0,(function*(){const e=new URLSearchParams({page:"0",wordsPerPage:"3600",filter:`{"userWord.optional.learnedOn":"${(0,a.today)()}"}`}).toString(),t=yield fetch(`${r.BASE_LINK}/users/${l}/aggregatedWords?${e}`,{method:"GET",headers:{Authorization:`Bearer ${c}`,Accept:"application/json"}});return(yield t.json())[0].paginatedResults}))}();let o="0",u=0,h="0",p=0,f="0";const g=yield(0,d.updateGameStatistics)();(null==g?void 0:g.optional.firstTimeInGame)===(0,a.today)()?((null==g?void 0:g.optional.audiocall.rightAnswers)+(null==g?void 0:g.optional.audiocall.wrongAnswers)!==0&&(o=(100*(null==g?void 0:g.optional.audiocall.rightAnswers)/((null==g?void 0:g.optional.audiocall.rightAnswers)+(null==g?void 0:g.optional.audiocall.wrongAnswers))).toFixed(2)),(null==g?void 0:g.optional.sprint.rightAnswers)+(null==g?void 0:g.optional.sprint.wrongAnswers)!==0&&(h=(100*(null==g?void 0:g.optional.sprint.rightAnswers)/((null==g?void 0:g.optional.sprint.rightAnswers)+(null==g?void 0:g.optional.sprint.wrongAnswers))).toFixed(2)),u=null==g?void 0:g.optional.audiocall.rightSeries,p=null==g?void 0:g.optional.sprint.rightSeries,(null==g?void 0:g.optional.audiocall.rightAnswers)+(null==g?void 0:g.optional.audiocall.wrongAnswers)+(null==g?void 0:g.optional.sprint.rightAnswers)+(null==g?void 0:g.optional.sprint.wrongAnswers)!==0&&(f=(100*((null==g?void 0:g.optional.audiocall.rightAnswers)+(null==g?void 0:g.optional.sprint.rightAnswers))/((null==g?void 0:g.optional.audiocall.rightAnswers)+(null==g?void 0:g.optional.audiocall.wrongAnswers)+(null==g?void 0:g.optional.sprint.rightAnswers)+(null==g?void 0:g.optional.sprint.wrongAnswers))).toFixed(2))):(h="0",p=0,o="0",u=0),this.container.innerHTML=`\n    <div class="textbook__header">Статистика</div>\n        <h2>${(new Date).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric"})}</h2>\n        <p>Общее количество новых слов за день: ${e.length}</p>\n        <p>Общее количество изученных слов за день: ${s.length}</p>\n        <p>Процент правильных ответов за день: ${f} %</p>\n        <h3 style="margin-top: 15px">Статистика мини-игр</h3>\n        <table>\n          <thead>\n            <th></th>\n            <th> Новые слова </th>\n            <th> Процент правильных ответов </th>\n            <th> Лучшая серия </th>\n          </thead>\n          <tbody>\n            <tr>\n              <td>Аудиовызов </td>\n              <td>${t.length}</td>\n              <td>${o} %</td>\n              <td>${u}</td>\n            </tr>\n            <tr>\n              <td>Спринт </td>\n              <td>${n.length}</td>\n              <td>${h} %</td>\n              <td>${p}</td>\n            </tr>\n          </tbody>\n        </table>\n    `}))}}t.default=new u},85:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateGameStatistics=void 0;const s=n(94),o=localStorage.getItem(s.LocalStorageKey.id)||"",r=localStorage.getItem(s.LocalStorageKey.token)||"";t.updateGameStatistics=function(){return i(this,void 0,void 0,(function*(){let e=yield fetch(`${s.BASE_LINK}/users/${o}/statistics`,{method:"GET",headers:{Authorization:`Bearer ${r}`,Accept:"application/json","Content-Type":"application/json"}});return e.ok?yield e.json():null}))}},997:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.today=t.updateWordFails=t.updateWordWins=void 0;const o=s(n(171));function r(){const e=new Date;return`${e.getFullYear()}.${e.getMonth()}.${e.getDate()}`}t.updateWordWins=function(e,t){return i(this,void 0,void 0,(function*(){const n=yield o.default.getUserWord(e);if(n){const i=()=>1===n.optional.straightWins&&"normal"===n.difficulty||2===n.optional.straightWins&&"hard"===n.difficulty,s={difficulty:i()?"learned":n.difficulty,optional:{wins:n.optional.wins+1,fails:n.optional.fails,playedInGame:!0,straightWins:n.optional.straightWins+1,firstGameName:n.optional.firstGameName||t,firstTimeInGame:n.optional.firstTimeInGame||r(),learnedOn:i()?r():n.optional.learnedOn}};o.default.updateUserWord(e,s)}else{const n={difficulty:"normal",optional:{wins:1,fails:0,playedInGame:!0,straightWins:1,firstGameName:t,firstTimeInGame:r(),learnedOn:"null"}};o.default.createUserWord(e,n)}}))},t.updateWordFails=function(e,t){return i(this,void 0,void 0,(function*(){const n=yield o.default.getUserWord(e);if(n){const i={difficulty:n.difficulty="normal",optional:{wins:n.optional.wins,fails:n.optional.fails+1,playedInGame:!0,straightWins:0,firstGameName:n.optional.firstGameName||t,firstTimeInGame:n.optional.firstTimeInGame||r(),learnedOn:"null"}};o.default.updateUserWord(e,i)}else{const n={difficulty:"normal",optional:{wins:0,fails:1,playedInGame:!0,straightWins:0,firstGameName:t,firstTimeInGame:r(),learnedOn:"null"}};o.default.createUserWord(e,n)}}))},t.today=r},343:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(816)),o=i(n(321));class r extends o.default{render(){document.body.className="body body_level5";const e=new s.default("div","team-page","").node,t=new s.default("h1","team-page-title","О команде ").node,n=new s.default("div","team-page-container","").node;e.append(t);const i=new s.default("div","team-cards","").node;n.append(i);const o=new s.default("div","team-page-block","").node,r=new s.default("img","image-page","",{src:"images/ava1.png"}).node,a=new s.default("p","name-team-page","Екатерина Якубовская").node,d=new s.default("p","fill-team-page","1. Мини-игра Аудиовызов \n 2. Страница статистики \n 3. Создание копии бэкенда \n 4. Создание репозитория").node,l=new s.default("a","image-page-link","Katsiaryna31",{href:"https://github.com/Katsiaryna31"}).node,c=new s.default("img","image-page-github","",{src:"images/github.svg"}).node;o.append(r,a,l,d),l.append(c);const u=new s.default("div","team-page-block","").node,h=new s.default("img","image-page","",{src:"images/ava2.png"}).node,p=new s.default("p","name-team-page","Юлия Волчек").node,f=new s.default("p","fill-team-page","1. Электронный учебник \n 2. Авторизация пользователя \n 3. Список слов \n 4. Прогресс изучения \n 5. Изученные слова").node,g=new s.default("a","image-page-link","yuliya-v",{href:"https://github.com/yuliya-v"}).node,w=new s.default("img","image-page-github","",{src:"images/github.svg"}).node;u.append(h,p,g,f),g.append(w);const m=new s.default("div","team-page-block","").node,v=new s.default("img","image-page","",{src:"images/ava3.png"}).node,y=new s.default("p","name-team-page","Юрий Шпаковский").node,_=new s.default("p","fill-team-page","1. Мини-игра Спринт  \n 2. Страница о команде").node,S=new s.default("a","image-page-link","Clukva",{href:"https://github.com/clukva"}).node,b=new s.default("img","image-page-github","",{src:"images/github.svg"}).node;return m.append(v,y,S,_),S.append(b),n.append(o,u,m),e.append(n),e}}t.default=new r},504:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextBookPage=t.textbookSettings=void 0;const o=s(n(816)),r=s(n(321)),a=n(94),d=n(496),l=n(934),c=s(n(294)),u=s(n(617)),h=s(n(378)),p=s(n(448));t.textbookSettings={chapters:[...Array(6)].map(((e,t)=>t+1)),pages:[...Array(30)].map(((e,t)=>t+1)),groupColors:["#fff","#62a3a7","#407da4","#0d60a9","#1444cd","#4332a9","#2a2077","#d86060"],hardWordsGroupNum:7,games:["Аудиовызов","Спринт"]};class f extends r.default{constructor(){super(),this.presenter=new c.default(this),this.container=new o.default("div","textbook").node,this.header=new o.default("div","textbook__header","Учебник").node,this.groupNum=0,this.groupSelect=new o.default("button","location-select__button location-select__button_group","").node,this.pageNum=0,this.pageSelect=new o.default("button","location-select__button location-select__button_page","").node,this.gameSelect=new o.default("button","location-select__button location-select__button_game","Мини-игра").node,this.wordsContainer=new o.default("div","textbook__words").node,this.fullPageSign=new o.default("p","textbook__full-page","Страница изучена!").node,this.pagesArr=[],this.container.append(this.header);const e=new o.default("div","textbook__nav").node;this.creatChapterSelect(e),this.createPageSelect(e),e.append(this.fullPageSign),this.createGameSelect(e),this.container.append(e,this.wordsContainer)}render(){document.body.className="body",this.wordsContainer.innerHTML="";const{group:e,page:n}=this.getLocation(),i=this.groupNum;return this.pageNum=n,this.groupNum=e,this.container.style.setProperty("--group-color",`${t.textbookSettings.groupColors[e]}`),this.fullPageSign.classList.remove("active"),this.groupNum===t.textbookSettings.hardWordsGroupNum?(this.presenter.onHardWordsPageSelect(),this.groupSelect.innerText="Сложные слова",this.pageSelect.style.visibility="hidden"):(this.presenter.onPageSelect(e-1,n-1),i!==e&&this.presenter.checkPagesList(),this.groupSelect.innerText=`Уровень ${e}`,this.pageSelect.style.visibility="",this.pageSelect.innerText=`Страница ${n}`),this.container}displayWords(e){return i(this,void 0,void 0,(function*(){e.forEach((e=>{const t=new u.default(e,this.presenter).node;this.wordsContainer.append(t)}))}))}displayAuthUserWords(e){e.forEach((e=>{const t=new h.default(e,this.presenter).node;this.wordsContainer.append(t)})),this.presenter.checkCurrentPage()}displayHardWords(e){e.forEach((e=>{const t=new p.default(e,this.presenter).node;this.wordsContainer.append(t)}))}getLocation(){const e=window.location.hash.slice(2).toLowerCase().split("/");return{group:+e[1],page:+e[2]}}creatChapterSelect(e){const n=new o.default("div","location-select").node,i=new o.default("ul","location-select__list location-select__list_group").node;if(t.textbookSettings.chapters.forEach((e=>{const n=new o.default("li","location-select__item",`Уровень ${e}`).node;n.style.setProperty("--decor-color",`${t.textbookSettings.groupColors[e]}`),n.onclick=()=>{e!==this.groupNum&&(history.pushState("","",`#/textbook/${e}/1`),this.render(),this.presenter.checkPagesList())},i.append(n)})),localStorage.getItem(a.LocalStorageKey.token)){const e=new o.default("li","location-select__item","Cложные слова").node,n=t.textbookSettings.hardWordsGroupNum;e.style.setProperty("--decor-color",`${t.textbookSettings.groupColors[n]}`),e.onclick=()=>{this.groupNum!==n&&(history.pushState("","",`#/textbook/${n}/1`),this.render())},i.append(e)}n.append(this.groupSelect,i),this.groupSelect.onclick=e=>{i.classList.add("active")},document.addEventListener("click",(e=>{e.target instanceof HTMLElement&&!e.target.closest(".location-select__button_group")&&i.classList.remove("active")})),e.append(n)}createPageSelect(e){const n=new o.default("div","location-select").node,i=new o.default("ul","location-select__list location-select__list_page").node;t.textbookSettings.pages.forEach((e=>{const t=new o.default("li","location-select__item location-select__item_page",`${e}`).node;i.append(t),this.pagesArr.push(t),t.onclick=()=>{e!==this.pageNum&&(history.pushState("","",`#/textbook/${this.groupNum}/${e}`),this.render())}})),this.pageSelect.onclick=e=>{i.classList.add("active")},document.addEventListener("click",(e=>{e.target instanceof HTMLElement&&!e.target.closest(".location-select__button_page")&&i.classList.remove("active")})),n.append(this.pageSelect,i),e.append(n)}createGameSelect(e){const t=new o.default("div","location-select").node,n=new o.default("ul","location-select__list").node,i=new o.default("li","location-select__item","Аудиовызов").node,s=new o.default("li","location-select__item","Спринт").node;n.append(i,s);const r=document.querySelector(".footer");s.onclick=()=>{const e=document.querySelector("#root"),t=this.getLocation(),n=new d.SprintPage((t.group-1).toString(),(t.page-1).toString());e.innerHTML="",r.style.display="none",history.pushState("","","#/sprint");const i=n.render();e.append(i)},i.onclick=()=>{const e=document.querySelector("#root"),t=this.getLocation(),n=new l.AudioCallPage((t.group-1).toString(),(t.page-1).toString());e.innerHTML="",r.style.display="none",history.pushState("","","#/audiocall");const i=n.render();e.append(i)},this.gameSelect.onclick=e=>{n.classList.add("active")},document.addEventListener("click",(e=>{e.target instanceof HTMLElement&&!e.target.closest(".location-select__button_game")&&n.classList.remove("active")})),t.append(this.gameSelect,n),e.append(t)}}t.TextBookPage=f,t.default=new f},171:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(94),o=localStorage.getItem(s.LocalStorageKey.id)||"",r=localStorage.getItem(s.LocalStorageKey.token)||"";t.default=new class{getWords(e,t){return i(this,void 0,void 0,(function*(){const n=yield fetch(`${s.BASE_LINK}/words?group=${e}&page=${t}`,{method:"GET",headers:{Accept:"application/json"}});return yield n.json()}))}createUserWord(e,t){return i(this,void 0,void 0,(function*(){const n=yield fetch(`${s.BASE_LINK}/users/${o}/words/${e}`,{method:"POST",headers:{Authorization:`Bearer ${r}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});yield n.json()}))}getUserWord(e){return i(this,void 0,void 0,(function*(){const t=yield fetch(`${s.BASE_LINK}/users/${o}/words/${e}`,{method:"GET",headers:{Authorization:`Bearer ${r}`,Accept:"application/json"}});return t.ok?yield t.json():null}))}updateUserWord(e,t){return i(this,void 0,void 0,(function*(){const n=yield fetch(`${s.BASE_LINK}/users/${o}/words/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});yield n.json()}))}getHardWords(){return i(this,void 0,void 0,(function*(){const e=new URLSearchParams({page:"0",wordsPerPage:"3600",filter:'{"userWord.difficulty":"hard"}'}).toString(),t=yield fetch(`${s.BASE_LINK}/users/${o}/aggregatedWords?${e}`,{method:"GET",headers:{Authorization:`Bearer ${r}`,Accept:"application/json"}});return(yield t.json())[0].paginatedResults}))}getUserWords(e,t){return i(this,void 0,void 0,(function*(){const n=new URLSearchParams({page:"0",wordsPerPage:"20",filter:`{"$and":[{"page":${t}}, {"group":${e}}]}`}).toString(),i=yield fetch(`${s.BASE_LINK}/users/${o}/aggregatedWords?${n}`,{method:"GET",headers:{Authorization:`Bearer ${r}`,Accept:"application/json"}});return(yield i.json())[0].paginatedResults}))}getLearnedAndHardWords(e,t){return i(this,void 0,void 0,(function*(){const n=new URLSearchParams({page:"0",wordsPerPage:"20",filter:`{"$and":[{"$or":[{"userWord.difficulty":"learned"}, {"userWord.difficulty":"hard"}]},{"page":${e}}, {"group":${t}}]}`}).toString(),i=yield fetch(`${s.BASE_LINK}/users/${o}/aggregatedWords?${n}`,{method:"GET",headers:{Authorization:`Bearer ${r}`,Accept:"application/json"}});return(yield i.json())[0].paginatedResults}))}}},294:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(94),r=n(997),a=n(504),d=s(n(171));t.default=class{constructor(e,t=d.default,n=new Audio){this.view=e,this.model=t,this.audio=n,this.view=e}onPageSelect(e,t){return i(this,void 0,void 0,(function*(){if(this.view.gameSelect.disabled=!1,localStorage.getItem(o.LocalStorageKey.id)){const n=yield this.model.getUserWords(e,t);this.view.displayAuthUserWords(n)}else{const n=yield this.model.getWords(e,t);this.view.displayWords(n)}}))}onHardWordsPageSelect(){return i(this,void 0,void 0,(function*(){const e=yield this.model.getHardWords();this.view.gameSelect.disabled=!e.length,this.view.displayHardWords(e)}))}wordDifficultyUpdate(e,t,n){return i(this,void 0,void 0,(function*(){e.disabled=!0;const i=yield this.model.getUserWord(t);if(i){const e={difficulty:n,optional:Object.assign(Object.assign({},i.optional),{learnedOn:"learned"===n?(0,r.today)():"null"})};yield this.model.updateUserWord(t,e)}else{const e={difficulty:n,optional:{wins:0,fails:0,playedInGame:!1,straightWins:0,learnedOn:"learned"===n?(0,r.today)():"null"}};yield this.model.createUserWord(t,e)}e.disabled=!1}))}checkCurrentPage(){return i(this,void 0,void 0,(function*(){if(!localStorage.getItem(o.LocalStorageKey.id))return;const e=yield this.model.getLearnedAndHardWords(this.view.pageNum-1,this.view.groupNum-1),t=this.view.pagesArr[this.view.pageNum-1];20===e.length?(this.view.fullPageSign.classList.add("active"),this.view.gameSelect.disabled=!0,t.classList.add("learned")):(this.view.fullPageSign.classList.remove("active"),this.view.gameSelect.disabled=!1,t.classList.remove("learned"))}))}checkPagesList(){return i(this,void 0,void 0,(function*(){localStorage.getItem(o.LocalStorageKey.id)&&a.textbookSettings.pages.forEach((e=>i(this,void 0,void 0,(function*(){const t=yield this.model.getLearnedAndHardWords(e-1,this.view.groupNum-1),n=this.view.pagesArr[e-1];20===t.length?n.classList.add("learned"):n.classList.remove("learned")}))))}))}onPlay(e){const t=[e.audio,e.audioMeaning,e.audioExample];let n=0;const i=()=>{this.audio.src=`${o.FILES_LINK+t[n]}`,this.audio.play()};this.audio.onended=()=>{n+=1,n<=2&&i()},i()}}},617:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(816)),o=n(94);t.default=class{constructor(e,t){this.presenter=t,this.text=new s.default("div","text").node,this.node=new s.default("div","word").node;const n=new s.default("div","word__header").node;n.style.backgroundImage=`url(${o.FILES_LINK+e.image})`;const i=new s.default("p","word__word-string",`${e.word}`).node,r=new s.default("p","word__top-row").node,a=new s.default("p","word__word-translate",`${e.wordTranslate}   ${e.transcription}`).node,d=new s.default("span","word__audio","play").node;d.innerHTML='\n<svg width="25" height="20" viewBox="0 0 38 31" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M19.3511 0C18.875 0 18.4622 0.161587 18.1138 0.484761L8.9609 8.97374H1.76C1.28282 8.97374 0.871122 9.13533 0.522673 9.4585C0.174224 9.78167 0 10.1645 0 10.6061V20.3939C0 20.8355 0.174224 21.2183 0.522673 21.5415C0.871122 21.8647 1.28393 22.0263 1.76 22.0263H8.9609L18.1138 30.5152C18.4622 30.8384 18.8739 31 19.3511 31C19.8283 31 20.24 30.8384 20.5884 30.5152C20.9369 30.1921 21.1111 29.8102 21.1111 29.3677V1.63234C21.1111 1.1908 20.9369 0.807935 20.5895 0.484761C20.2422 0.161587 19.8294 0 19.3522 0H19.3511Z" fill="#B3B3B3"/>\n<path d="M29.5979 19.1322C30.3389 18.0151 30.7094 16.8082 30.7094 15.5103C30.7094 14.2125 30.3389 13.0014 29.5979 11.8751C28.8569 10.7487 27.8774 9.95512 26.6561 9.49425C26.4819 9.40952 26.2634 9.36612 26.0027 9.36612C25.5499 9.36612 25.1572 9.52422 24.8258 9.83939C24.4943 10.1566 24.3286 10.5431 24.3286 11.004C24.3286 11.3625 24.4331 11.6653 24.6432 11.9123C24.8532 12.1592 25.1044 12.3731 25.4011 12.5519C25.6966 12.7307 25.9932 12.927 26.2898 13.1409C26.5864 13.3548 26.8387 13.6565 27.0477 14.0492C27.2567 14.4419 27.3612 14.9286 27.3612 15.5083C27.3612 16.088 27.2567 16.5747 27.0477 16.9673C26.8387 17.36 26.5864 17.6628 26.2898 17.8756C25.9932 18.0885 25.6966 18.2859 25.4011 18.4646C25.1044 18.6434 24.8522 18.8573 24.6432 19.1043C24.4342 19.3512 24.3286 19.655 24.3286 20.0126C24.3286 20.4734 24.4954 20.8609 24.8258 21.1771C25.1572 21.4913 25.5488 21.6514 26.0027 21.6514C26.2634 21.6514 26.4819 21.6091 26.6561 21.5233C27.8763 21.0449 28.8569 20.2471 29.5979 19.1291V19.1322Z" fill="#B3B3B3"/>\n<path d="M35.7563 22.8582C37.252 20.6112 37.9999 18.1571 37.9999 15.499C37.9999 12.8419 37.252 10.3899 35.7563 8.13971C34.2605 5.89271 32.2811 4.25452 29.819 3.23039C29.591 3.14417 29.362 3.10001 29.1329 3.10001C28.6759 3.10001 28.2796 3.26509 27.9451 3.59525C27.6105 3.92541 27.4443 4.31551 27.4443 4.76764C27.4443 5.44479 27.7874 5.95685 28.4735 6.30489C29.4579 6.80855 30.1269 7.19023 30.4785 7.45099C31.7803 8.38891 32.7967 9.56445 33.5265 10.9797C34.2562 12.395 34.6216 13.9007 34.6216 15.5C34.6216 17.0972 34.2562 18.6039 33.5265 20.0203C32.7967 21.4356 31.7803 22.6111 30.4785 23.549C30.1269 23.8098 29.4579 24.1915 28.4735 24.6951C27.7874 25.0432 27.4443 25.5542 27.4443 26.2324C27.4443 26.6835 27.6116 27.0746 27.9451 27.4048C28.2785 27.7349 28.6833 27.9 29.1585 27.9C29.3694 27.9 29.59 27.8558 29.818 27.7696C32.28 26.7444 34.2605 25.1084 35.7552 22.8593L35.7563 22.8582Z" fill="#B3B3B3"/>\n</svg>',d.onclick=()=>this.presenter.onPlay(e),r.append(a,d),n.append(i),this.text.innerHTML=`\n    <p class="word__text-meaning">${e.textMeaning}</p>\n    <p class="word__text-example">${e.textExample}</p>\n    <p class="word__text-meaning-transl">${e.textMeaningTranslate}</p>\n    <p class="word__text-example-transl">${e.textExampleTranslate}</p>\n    `,this.node.append(n,r,this.text)}}},378:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(816)),r=s(n(617));class a extends r.default{constructor(e,t){var n,s,r,a;super(e,t),this.presenter=t,this.text.classList.add("text_auth");const d=new o.default("button","word__btn word__btn_hard").node;d.innerHTML='\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\nwidth="23" height="21" fill="#b3b3b3" viewBox="0 0 472.615 472.615" style="enable-background:new 0 0 472.615 472.615;" xml:space="preserve">\n<g>\n\t<g>\n\t\t<polygon points="236.307,0 96.738,0 96.738,472.615 236.307,365.585 375.877,472.615 375.877,0 \t\t"/>\n\t</g>\n</g>\n</svg>';const l=new o.default("button","word__btn word__btn_learned").node;if(l.innerHTML='\n<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\nwidth="23" height="23" fill="#b3b3b3" viewBox="0 0 415.582 415.582" style="enable-background:new 0 0 415.582 415.582;"\n\t xml:space="preserve">\n\t<path d="M411.47,96.426l-46.319-46.32c-5.482-5.482-14.371-5.482-19.853,0L152.348,243.058l-82.066-82.064\n\t\tc-5.48-5.482-14.37-5.482-19.851,0l-46.319,46.32c-5.482,5.481-5.482,14.37,0,19.852l138.311,138.31\n\t\tc2.741,2.742,6.334,4.112,9.926,4.112c3.593,0,7.186-1.37,9.926-4.112L411.47,116.277c2.633-2.632,4.111-6.203,4.111-9.925\n\t\tC415.582,102.628,414.103,99.059,411.47,96.426z"/>\n</svg>',"hard"===(null===(n=e.userWord)||void 0===n?void 0:n.difficulty)?d.classList.add("active"):"learned"===(null===(s=e.userWord)||void 0===s?void 0:s.difficulty)&&(l.classList.add("active"),this.node.classList.add("dark")),d.onclick=()=>i(this,void 0,void 0,(function*(){d.classList.contains("active")?(d.classList.remove("active"),yield this.presenter.wordDifficultyUpdate(d,e._id,"normal")):(d.classList.add("active"),l.classList.remove("active"),this.node.classList.remove("dark"),yield this.presenter.wordDifficultyUpdate(d,e._id,"hard")),this.presenter.checkCurrentPage()})),l.onclick=()=>i(this,void 0,void 0,(function*(){l.classList.contains("active")?(l.classList.remove("active"),this.node.classList.remove("dark"),yield this.presenter.wordDifficultyUpdate(l,e._id,"normal")):(d.classList.remove("active"),l.classList.add("active"),this.node.classList.add("dark"),yield this.presenter.wordDifficultyUpdate(l,e._id,"learned")),this.presenter.checkCurrentPage()})),this.node.append(d,l),null===(a=null===(r=e.userWord)||void 0===r?void 0:r.optional)||void 0===a?void 0:a.playedInGame){const t=new o.default("p","word__stat word__stat_wins",`Правильные ответы: ${e.userWord.optional.wins}`).node,n=new o.default("p","word__stat word__stat_fails",`Ошибки: ${e.userWord.optional.fails}`).node;this.node.append(t,n)}}}t.default=a},448:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(816)),o=i(n(617));class r extends o.default{constructor(e,t){super(e,t),this.presenter=t,this.text.classList.add("text_auth");const n=new s.default("button","word__btn word__btn_delete").node;n.innerHTML='\n<svg width="30" height="30" fill="#b3b3b3" viewBox="0 0 24 24" version="1.2" baseProfile="tiny" xmlns="http://www.w3.org/2000/svg">\n<path d="M12 4c-4.419 0-8 3.582-8 8s3.581 8 8 8 8-3.582 8-8-3.581-8-8-8zm3.707 10.293c.391.391.391 1.023 0 1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293 2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023 0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023 0-1.414s1.023-.391 1.414 0l2.293 2.293 2.293-2.293c.391-.391 1.023-.391 1.414 0s.391 1.023 0 1.414l-2.293 2.293 2.293 2.293z"/>\n</svg>',this.node.append(n),n.onclick=()=>{this.node.remove(),this.presenter.wordDifficultyUpdate(n,e._id,"normal")}}}t.default=r},88:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(190)),o=i(n(265)),r=i(n(934)),a=i(n(496)),d=i(n(504)),l=i(n(343)),c=i(n(602)),u=document.querySelector("#root"),h=[{path:"/",component:o.default},{path:"auth",component:s.default},{path:"audiocall",component:r.default},{path:"sprint",component:a.default},{path:"textbook",component:d.default},{path:"about",component:l.default},{path:"statistics",component:c.default}];t.default=()=>{const e={resource:(window.location.hash.slice(2).toLowerCase()||"/").split("/")[0]},{component:t}=((e,t)=>t.find((t=>t.path===e||void 0)))(e.resource,h)||h[0];document.querySelector(".footer").style.display="audiocall"===e.resource||"sprint"===e.resource?"none":"";const n=t.render();u.innerHTML="",u.append(n)}},94:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.FILES_LINK=t.LocalStorageKey=t.BASE_LINK=void 0,t.BASE_LINK="https://react-learnwords-example.herokuapp.com",(n=t.LocalStorageKey||(t.LocalStorageKey={})).name="RSLang2022AppUserName",n.id="RSLang2022AppUserId",n.token="RSLang2022AppToken",n.refreshToken="RSLang2022AppRefreshToken",t.FILES_LINK="https://raw.githubusercontent.com/Katsiaryna31/react-rslang-be/main/"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(323)})();